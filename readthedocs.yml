version: 2
build:
  os: ubuntu-22.04
  tools:
    python: "3.11"
    nodejs: "20"
  jobs:
    pre_build:
      - pip install -r docs_rtd/requirements.txt
      - pip install symusic
    post_build:
      - SITE_DIR="${READTHEDOCS_OUTPUT:-docs_rtd/_build}/html" && npx pagefind --site "$SITE_DIR" --output-subdir _pagefind
sphinx:
  configuration: docs_rtd/conf.py
